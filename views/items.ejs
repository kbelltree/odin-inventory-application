<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head'); %>
  <body>
    <%- include('partials/header') %>
    <main class="container">
      <div class="pageHeadingFormat itemsHeadingContainer">
        <div class="itemsHeading">
          <h2><%= urlPath %></h2>       
            <a class="btnAdd"
              href="/size/<%= urlPath %>/new-item"
              aria-label="Open the 'add a new item' form"
              title="add a new item"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="feather feather-plus-square"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
                <line x1="12" y1="8" x2="12" y2="16" />
                <line x1="8" y1="12" x2="16" y2="12" />
              </svg>
            </a>        
        </div>
        <form class="itemFilterForm" action="/size">
          <label for="itemSize">Filter by size: </label>
          <div class="sizeSelect">
            <select class="itemFilterSelect" name="size" id="itemSize">
              <% sizes.forEach(size => { %>
              <option value="<%= size.size %>" <%= urlPath === size.size ? 'selected' : '' %>><%= size.size %></option>
              <% }) %>
            </select>
          </div>
        </form>
      </div>

      <table>
        <thead>
          <tr>
            <th class="titleCell">Title</th>
            <th>Size</th>
            <th>Id</th>
            <th>Quantity</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% items.forEach(item => { %>
          <tr>
            <td>
              <a  class="tdTextLinkFormat" href="/size/<%= urlPath %>/<%= item.item_id %>"
                ><%= item.title %></a
              >
            </td>
            <td><a class="tdTextLinkFormat" href="/size/<%= urlPath %>/<%= item.item_id %>"><%= item.size %></a></td>
            <td class="tdItemId"><%= item.item_id %></td>
            <td><a  class="tdTextLinkFormat" href="/size/<%= urlPath %>/<%= item.item_id %>"><%= item.quantity %></a></td>
            <!-- TODO: Add deleting feature -->
            <td class="tdBtnRight">
                <a href="/size/<%= urlPath %>/delete/<%= item.item_id %>/authorize-delete" class="tdBtnFormat" aria-label="Delete <%= item.title %> in size <%= item.size %>">
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      class="feather feather-trash-2"
                    >
                      <polyline points="3 6 5 6 21 6"></polyline>
                      <path
                        d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"
                      ></path>
                      <line x1="10" y1="11" x2="10" y2="17"></line>
                      <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                </a> 
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </main>
    <%- include('partials/footer') %>
    <script src="/uiEventHandlers.js"></script>
  </body>
</html>
